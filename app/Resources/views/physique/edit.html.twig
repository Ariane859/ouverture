{% extends 'base.html.twig' %}

{% block content %}

    <style>
            body
            {
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            .sidebar
            {
                background-color: teal;
                width: 100%;
                top: 0;
                left: 0;
                padding:1%;
                position:relative;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            a
            {
                color: white;
                text-decoration: none;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            a:hover
            {
                color:white;
                text-decoration:none;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            .accueil
            {
                color:white;
                text-decoration:none;
                font-size:1.7rem;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            .accueil:hover
            {
                color:white;
                text-decoration:none;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            .formulaire 
            {
                color: black;
                margin-top:1%;
                margin-left:11%;
                width:80%;
                border:solid white 1px;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            #ouvrir
            {
                color:white;
                text-decoration:none;
                margin-left:80%;
                font-size:1.2rem;
                color:white;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            #ouvrir:hover
                {
                    color:white;
                    text-decoration:none;
                    font-family: Georgia, Times, 'Times New Roman', serif;
                }
            #index
            {
                color: white;
                margin-top:2%;
                margin-left:94%;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            h2
            {
                margin-left:10%;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            .piece
            {
                margin-top:5%;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            .foot
            {
               
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            {# .valider
            {
                margin-right:90%;
            } #}
            #supprimer
            {
                margin-left:1%;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            {# #physiquebundle_physique_tuteur
            {
                cursor: no-drop;
            }
            #physiquebundle_physique_prenomTuteur
            {
                cursor: no-drop;
            } #}
            {# #editform_mineur {
                display:none;
            }  #}
            {# #prenom_tuteur {
                display:none;
            } #}
            #ajout
            {
                margin-left:97%;
                font-family: Georgia, Times, 'Times New Roman', serif;
            }
            #information
            {
                font-family:  Georgia, Times, 'Times New Roman', serif;
            }
            tr
            {
                font-size:95%;
            }
            #valider
            {
                margin-left:80%;
            }
            #table 
            {
                margin-left:3%;
            }
    </style>

    {% block sidebar %}
        <div class="sidebar">
            <a href="{{path('path_home')}}" class="accueil">Accueil</a>
            <a href="{{ path('path_choix')}}" id="ouvrir">Ouvrir un compte</a>
        </div>
    {% endblock %}

            <a href="{{ path('physique_index') }}"class="btn btn-primary" id="index">Liste</a>
<div class="container">
    <h2 id="information">Informations personnelles</h2>
    <div class="formulaire">
        {{ form_start(edit_form) }}
            {% if edit_form.nom is defined %}
                <div id="editform_mineur">
                {{ form_row(edit_form.mineur)}}
                </div>
            {% endif %}
        {# <div class="form-group col-md-6">
                <div id="editform_mineur">
                    {{ form_row(edit_form.mineur)}}
                </div>
            </div> #}
            <div class="form-row">
                <div class="form-group col-md-6">
                    {% if edit_form.nom is defined %}
                    {{form_row(edit_form.nom)}}
                    {% endif %}
                </div>
                <div class="form-group col-md-6">
                    {% if edit_form.prenom is defined %}
                    {{form_row(edit_form.prenom)}}
                    {% endif %}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    {% if edit_form.sigle is defined %}
                    {{form_row(edit_form.sigle)}}
                    {% endif %}
                </div>
                    <div class="form-group col-md-6">
                    {% if edit_form.raisonSociale is defined %}
                    {{form_row(edit_form.raisonSociale)}}
                    {% endif %}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    {{ form_row(edit_form.datnais)}}
                </div>
                <div class="form-group col-md-6">
                    {{ form_row(edit_form.telephone)}}
                </div>
            </div>
            <div class="form-group">
                {{ form_row(edit_form.email)}}
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    {{ form_row(edit_form.pays)}}
                </div>
                <div class="form-group col-md-6">
                    {{ form_row(edit_form.ville)}}
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <div id="tuteur">
                        {% if edit_form.tuteur is defined %}
                            {{form_row(edit_form.tuteur)}}
                        {% endif %}
                    </div>
                </div>
                <div class="form-group col-md-6">
                    <div id="prenom_tuteur">
                        {% if edit_form.prenomTuteur is defined %}
                            {{form_row(edit_form.prenomTuteur)}}
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="row foot">
                <input type="submit" class="btn btn-primary" id="valider" value="Valider" />
            </div>
        {{ form_end(edit_form) }}
        {{ form_start(delete_form,{'attr':{'onSubmit':"return confirm('Voulez vous vraiment supprimer?');"}}) }}
                <input type="submit" class="btn btn-danger" id="supprimer" value="Supprimer">
        {{ form_end(delete_form) }} 
    </div>
    <div class="piece">
    {# data-toggle="modal" #}
    <h2>Pièces jointes</h2>
        {% if pieces is not null %}
                <table class="table table-striped table-hover table-sm table-responsive-lg thead-light" id="table">
                <thead>
                <tr>
                    <th>Id</th>
                    <th>Type Pièce</th>
                    <th>N° Pièce</th>
                    <th>Date Expiration</th>
                    <th>Date Déclaration</th>
                    <th>Date Délivrance</th>
                    <th>Emetteur</th>
                    <th>Pays d'émission</th>
                    <th>Fichier</th>
                    <th>Nom</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for piece in pieces %}
                <tr>
                    <td><a href="{{ path('piece_show', { 'id': piece.id }) }}" style="color:black;">{{ piece.id }}</a></td>
                    <td>{{ piece.typePiece }}</td>
                    <td>{{ piece.refPiece }}</td>
                    <td>{% if piece.datexpiration %}{{ piece.datexpiration|date('Y-m-d H:i:s') }}{% endif %}</td>
                    <td>{% if piece.datdeclaration %}{{ piece.datdeclaration|date('Y-m-d H:i:s') }}{% endif %}</td>
                    <td>{% if piece.datedelivrance %}{{ piece.datedelivrance|date('Y-m-d H:i:s') }}{% endif %}</td>
                    <td>{{ piece.emetteur }}</td>
                    <td>{{ piece.paysEmission }}</td>
                    <td><a href="{{ asset('uploads/brochures/' ~ piece.fichier) }}" style="color:skyblue">{{ piece.fichier }}</a></td>
                    <td>{{ piece.physique }}</td>
                    <td>
                        <ul>
                            {# <li>
                                <a href="{{ path('piece_show', { 'id': piece.id }) }}">show</a>
                            </li> #}
                                <a href="{{ path('piece_edit', { 'id': piece.id }) }}" class="btn btn-info">Modifier</a>
                        </ul>
                    </td>
                </tr>
            {% endfor %}
            </tbody> 
        </table>
        {% else %}
            <p>Aucune pièce trouvé!</p>
        {% endif %}
    <a href="{{ path('piece_new') }}" id="ajout" data-toggle="modal" class="btn btn-primary">Ajouter</a>
     {# modal #}
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                         <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" id="body-edit">
                            {# {{render(controller('PieceBundle:Controller:PieceController::newAction'))}} #}
                             {% include 'piece/new.html.twig' %}
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                 </div>
            </div>
        </div>
    </div>       
{% block javascripts %} 
{{parent() }}

<script> 
     
$(document).ready(function(){

    $("#ajout").click(function(ev){
        ev.preventDefault();
        $('#type').val("")
        $('#myModal').modal('show')

        })
    });
</script>   
{% endblock %}
{% endblock %}

