{% extends 'base.html.twig' %}

{% block content %}
<style>
        body
            {
                font-family: Georgia, 'Times New Roman', Times, serif;
                /*margin-top:30px;*/
            }
        .sidebar
            {
                background-color: teal;
                width: 100%;
                top: 0;
                left: 0;
                padding:1%;
                position:absolute;
            }
        a
            {
                color: white;
                text-decoration: none;
            }
        a:hover
        {
            color:white;
            text-decoration:none;
        }
        .accueil
        {
            color:white;
            font-size:1.7rem;
        }
        #ouvrir
        {
            margin-left:80%;
            font-size:1.2rem;
        }
        #mineur
        {
            display:none;
        }
        #tuteur {
            display:none;
        }
        #prenom_tuteur {
            display:none;
        }
         {# .formulaire 
        {
            color: black;
            margin-top:5%;
            margin-left:11%;
            width:80%;
            border:solid white 1px;
        } #}
        {# #index
        {
            color: white;
            margin-left:94%;
            margin-top:5%;
        }
        .index:hover{
            color:black;
        } #}
        {# #physiquebundle_physique_tuteur
        {
            cursor: no-drop;
        }
        #physiquebundle_physique_prenomTuteur
        {
            cursor: no-drop;
        } #}
        
         {# #contain
        {
            margin-top:8%;
        }
        .stepwizard-step p {
            margin-top: 0px;
            color:#666;
        }
        .stepwizard-row {
            display: table-row;
        }
        .stepwizard {
            display: table;
            width: 100%;
            position: relative;
        }
        .stepwizard-step button[disabled] {
            /*opacity: 1 !important;
            filter: alpha(opacity=100) !important;*/
        }
        .stepwizard .btn.disabled, .stepwizard .btn[disabled], .stepwizard fieldset[disabled] .btn {
            opacity:1 !important;
            color:#bbb;
        }
        .stepwizard-row:before {
            top: 14px;
            bottom: 0;
            position: absolute;
            content:" ";
            width: 100%;
            height: 1px;
            background-color: #ccc;
            z-index: 0;
        }
        .stepwizard-step {
            display: table-cell;
            text-align: center;
            position: relative;
        }
        .btn-circle {
            width: 30px;
            height: 30px;
            text-align: center;
            padding: 6px 0;
            font-size: 12px;
            line-height: 1.428571429;
            border-radius: 15px;
        }
        #step-2
        {
            margin-top:8%;
        }
       #pièce
        {
            margin-right:130%;
            margin-top:5%;
        } #}

        #grad1 {
       
            margin-top:3%;
        }
        .card {
            margin-top:10%;
            width:100%;
            z-index: 0;
            position: relative;
        }
        #form {
            text-align: center;
            position: relative;
            margin-top: 35px
        }
       
        #form fieldset .form-card {
            background: white;
            box-shadow: 0 2px 3px 2px rgba(0, 0, 0, 0.2);
            padding: 12px 15px 12px 15px;
            width: 95%;
            margin: 0 2% 20px 3%;
            text-align: left;
            position: relative
        }

        #form fieldset {
            background: white;
            border-radius: 0.5rem;
            box-sizing: border-box;
            width: 95%;
            margin-left:1%;
            margin-top:15%;
            padding-bottom: 20px;
            position: relative
        }

         #form fieldset:not(:first-of-type) {
            display: none
        }

        #form input {
            margin-bottom: 13px;
            margin-top: 2px;
        }
        #enregistrer
        {
            margin-left:85%;
        }
        .fit-image {
            width: 100%;
            object-fit: cover
        }
</style>
    
<h1></h1>
        
{% block sidebar %}
    <div class="sidebar">
        <a href="{{path('path_home')}}" class="accueil">Accueil</a>
        <a href="{{ path('path_choix')}}" id="ouvrir">Ouvrir un compte</a>
    </div>
{% endblock %}
    <div class="container" id="grad1">
            {{ form_start(form,{'attr':{'id':"form"}}) }} 
                {# <h1>Remplissez le formulaire suivant pour continuer l'ouverture du compte</h1> #}
                <fieldset>
                    <div class="form-card">
                        {% if form.nom is defined %}
                            <div id="mineur">
                                {{ form_row(form.mineur)}}
                            </div>
                        {% endif %}
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                {% if form.nom is defined %}
                                    {{form_row(form.nom)}}
                                {% endif %}
                            </div>
                            <div class="form-group col-md-6">
                                {% if form.prenom is defined %}
                                    {{form_row(form.prenom)}}
                                {% endif %}
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">    
                                {% if form.sigle is defined %}   
                                    {{form_row(form.sigle)}}
                                {% endif %}
                            </div>
                            <div class="form-group col-md-6">
                                {% if form.raisonSociale is defined %}
                                    {{form_row(form.raisonSociale)}}
                                {% endif %}
                            </div>
                        </div>                                
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                {{ form_row(form.datnais)}}
                                <p id="reponse"></p>
                            </div>
                            <div class="form-group col-md-6">
                                {{ form_row(form.telephone)}}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_row(form.email)}}
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                {{ form_row(form.pays)}}
                            </div>
                            <div class="form-group col-md-6">
                                {{ form_row(form.ville)}}
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <div id="tuteur">
                                    {% if form.tuteur is defined %}
                                        {{form_row(form.tuteur)}}
                                    {% endif %}
                                </div>
                            </div>
                            <div class="form-group col-md-6">
                                <div id="prenom_tuteur">
                                    {% if form.prenomTuteur is defined %}
                                        {{form_row(form.prenomTuteur)}}
                                    {% endif %}
                                </div>
                            </div>
                        </div> 
                    </div>                                                     
                      <input type="submit" class="btn btn-outline-success next action-button" id="enregistrer" value="Enregister">
                </fieldset>
                 <fieldset>
                    <div class="form-card form-card-message">
                            <div class="row justify-content-center">
                                <div class="col-3"> <img src="https://img.icons8.com/color/96/000000/ok--v2.png" class="fit-image"> </div>
                            </div> <br><br>
                            <div class="row justify-content-center">
                                <div class="col-7 text-center">
                                    <h5>Enregistré avec succès!</h5>                            
                                 </div>
                            </div>
                    </div>                                                                                  
                </fieldset>
            {{ form_end(form) }} 
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    {{parent() }}
        <script>
            $(document).ready(function(){
                $("#enregistrer").click(function(e)
                {
                    e.preventDefault();
                   var current_fs=$(this).parent();
                   var next_fs = $(this).parent().next();
                    var nom= $("#physiquebundle_physique_nom").val();
                    var prenom= $("#physiquebundle_physique_prenom").val();
                    var datnais= $("#physiquebundle_physique_datnais").val();
                    var telephone=$("#physiquebundle_physique_telephone").val();
                    var email= $("#physiquebundle_physique_email").val();
                    var pays= $("#physiquebundle_physique_pays").val();
                    var ville= $("#physiquebundle_physique_ville").val();
                    //var tuteur= $("#physiquebundle_physique_tuteur").val();
                    //var prenomTuteur= $("#physiquebundle_physique_prenomTuteur").val();
                    
                    $.ajax(
                        {
                            method:'post',
                            url:'physique_new',
                            data: {
                                physiquebundle_physique_nom:nom,
                                physiquebundle_physique_prenom:prenom,
                                physiquebundle_physique_datnais:datnais,
                                physiquebundle_physique_telephone:telephone,
                                physiquebundle_physique_email:email,
                                physiquebundle_physique_pays:pays,
                                physiquebundle_physique_ville:ville,
                                //tuteur:tuteur
                            },
                            success: function(data){
                                //console.log(data);
                                if(data.code == 400){
                                    console.log(data)
                                    alert('error')
                                }
                                else if(data.code == 300)
                                {
                                    alert('Remplissez les champs')
                                }
                                else
                                {
                                    console.log(data)
                                    next_fs.show();
                                    current_fs.animate({opacity: 0}, {
                                    step: function(now) {
                                    
                                    opacity = 1 - now;

                                    current_fs.css({
                                        'display': 'none',
                                        'position': 'relative'
                                    });
                                    next_fs.css({'opacity': opacity});
                                    },
                                    duration: 2000
                                });
                                }
                            }
                        })
                });
            });
    
        </script>
{% endblock %}
